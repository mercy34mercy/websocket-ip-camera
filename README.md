# WebRTCビデオストリーミングアプリケーション

このプロジェクトは、WebRTCを使用したシンプルなビデオストリーミングアプリケーションです。Webブラウザを通じてカメラ映像をリアルタイムで視聴できます。

## 機能

- Raspberry Piのカメラからのビデオストリーミング
- ブラウザベースのビデオプレーヤー
- WebSocketを使用したリアルタイム通信
- FFmpegによる高品質ビデオエンコーディング

## 必要条件

- Node.js (v14以上推奨)
- FFmpeg (最新版推奨)
- Raspberry Pi
- V4L2対応カメラ

## インストール

1. リポジトリをクローンする:
```
git clone <リポジトリURL>
cd webrtc-video
```

2. 依存パッケージをインストールする:
```
npm install
```

3. FFmpegがインストールされていることを確認:
```
sudo apt update
sudo apt install ffmpeg
```

4. カメラデバイスが認識されていることを確認:
```
ls -l /dev/video*
```

## 使用方法

1. アプリケーションを起動:
```
npm start
```

2. ブラウザで以下のURLにアクセス:
```
http://<Raspberry PiのIP>:3003
```

3. ビデオストリームを表示するには:
```
http://<Raspberry PiのIP>:3003/view
```

## プロジェクト構成

- `src/index.js` - メインサーバーアプリケーション
- `public/` - 静的ファイル（HTML、CSS、JavaScript）
- `public/jsmpeg.min.js` - ブラウザでMPEGストリームを再生するためのライブラリ

## トラブルシューティング

### カメラにアクセスできない場合
- `/dev/video0` が存在することを確認してください
- `sudo raspi-config` を使用してカメラインターフェースが有効になっていることを確認してください

### ビデオが表示されない場合
- ブラウザコンソールでエラーを確認してください
- FFmpegが正しくインストールされているか確認してください
- サーバーコンソールでFFmpeg関連のエラーメッセージを確認してください

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。
